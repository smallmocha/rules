# Quantumult X — 去除开屏广告（针对：淘宝、京东、微博、哈啰、小红书、美团、饿了么、滴滴、携程、拼多多、闲鱼）
# 注意：这是一个基础模板。根据你设备上抓到的日志继续补充域名/URL。
# 使用方法：将本文件内容复制到 Quantumult X 的配置（或保存为 .conf 并导入），同时把脚本部分保存为 remove_splash_ads.js 到 Quantumult X 的脚本目录。

############### 代理部分（请保留或替换为你现有的 Proxy / Proxy Group）
[General]
# 在这里保留你的 General 配置

[Proxy]
# 示例: 填入你的代理（或保留原有）
# SOCKS5 = custom_socks5, 127.0.0.1, 1080
# HTTP = custom_http, 127.0.0.1, 8080

[Proxy Group]
# 示例: 你的代理组

############### Host（把已知纯广告域名指向本地以阻断）
[Host]
# 淘宝 / 闲鱼
gw.alicdn.com = 127.0.0.1
adash.m.taobao.com = 127.0.0.1
nbsdk-baichuan.alicdn.com = 127.0.0.1

# 京东
api.m.jd.com = 127.0.0.1
im-x.jd.com = 127.0.0.1
bdsp-x.jd.com = 127.0.0.1

# 微博
sdkapp.uve.weibo.com = 127.0.0.1
wbapp.uve.weibo.com = 127.0.0.1
api.weibo.cn = 127.0.0.1

# 哈啰
adapi.hellobike.com = 127.0.0.1
# gg.caocaokeji.cn = 127.0.0.1  # 若确认，可解除注释

# 小红书
ads-api.xiaohongshu.com = 127.0.0.1
pages.xiaohongshu.com = 127.0.0.1
app.xiaohongshu.com = 127.0.0.1

# 美团 / 饿了么
apimobile.meituan.com = 127.0.0.1
img.meituan.net = 127.0.0.1
# elemecdn.com = 127.0.0.1  # 注：饿了么有时使用 elemecdn，若影响功能可调整

# 滴滴
api.didialift.com = 127.0.0.1
static.didialift.com = 127.0.0.1

# 携程
ad.ctrip.com = 127.0.0.1

# 拼多多
api.pinduoduo.com = 127.0.0.1
pstatp.com = 127.0.0.1
pangolin.snssdk.com = 127.0.0.1

############### URL Rewrite（对开屏 / startup / splash / ad 接口用脚本清理响应体）
[URL Rewrite]
# 通用匹配开屏与广告相关路径 -> 用脚本清理返回体
^https?:\/\/.*\/(?:splash|startup|open|launch|startupv2|startup_ad|startup_ads|ad|ads|advert|commercial).* url script-response-body remove_splash_ads.js
# 京东启动接口示例
^https?:\/\/api\.m\.jd\.com\/client\.action\?functionId=start url script-response-body remove_splash_ads.js
# 微博 SDK 广告接口示例
^https?:\/\/sdkapp\.uve\.weibo\.com\/interface\/sdk\/sdkad\.php url script-response-body remove_splash_ads.js
# 小红书 广告接口示例
^https?:\/\/api\.xiaohongshu\.com\/.*\/ads url script-response-body remove_splash_ads.js
# 美团 广告接口示例
^https?:\/\/apimobile\.meituan\.com\/ad\/ url script-response-body remove_splash_ads.js
# 拼多多 启动广告示例
^https?:\/\/api\.pinduoduo\.com\/api\/cappuccino\/splash url script-response-body remove_splash_ads.js

############### Script（列出脚本名，脚本文件请放到 Quantumult X 的脚本目录）
[Script]
# remove_splash_ads.js

############### MITM（必须配置并安装信任证书以修改 HTTPS 返回体）
[MITM]
hostname = gw.alicdn.com, adash.m.taobao.com, nbsdk-baichuan.alicdn.com, \
api.m.jd.com, sdkapp.uve.weibo.com, wbapp.uve.weibo.com, api.weibo.cn, \
adapi.hellobike.com, ads-api.xiaohongshu.com, app.xiaohongshu.com, \
apimobile.meituan.com, img.meituan.net, api.didialift.com, static.didialift.com, \
ad.ctrip.com, api.pinduoduo.com, pstatp.com, pangolin.snssdk.com

############### Filter（可选：以关键字快速 reject 广告请求）
[Filter]
^https?:\/\/.*(?:adservice|ads|adserver|adapi|adtrack|advert|splash|startup).* reject
# 若某些域名误伤业务，移除或细化正则

############### 说明与风险提示
# 1) Host 中把域名指向 127.0.0.1 会直接阻断，副作用可能造成 App 部分功能异常或上报失败。
# 2) 推荐工作流：优先用 URL Rewrite + remove_splash_ads.js 精准编辑返回体，副作用更小；对纯广告域名再使用 Host 阻断。
# 3) 每次 App 更新后建议抓包检查新的广告域与接口并追加到本配置。
